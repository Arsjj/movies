{"version":3,"file":"static/js/230.faf68393.chunk.js","mappings":"iPAOMA,EAAU,CACd,eAAgB,oBA2JlB,MAxJA,WACE,OAA4BC,EAAAA,EAAAA,UAAS,CACnCC,SAAU,SACVC,SAAU,YAFZ,eAAOC,EAAP,KAAeC,EAAf,KAKMC,EAAkB,SAACC,GACvBF,GAAU,SAACG,GAAD,eAAC,UACNA,GADK,cAEPD,EAAEE,OAAOC,KAAOH,EAAEE,OAAOE,WAE5BC,QAAQC,IAAIT,IAGd,GAA6CU,EAAAA,EAAAA,YAAWC,EAAAA,GAAvCC,GAAjB,EAAQC,QAAR,EAAiBD,aAEXE,GAFN,EAA8BC,WAEnBC,aAAaC,QAAQ,eAC1BC,GAAWC,EAAAA,EAAAA,MAEjB,GAAgDC,EAAAA,EAAAA,GAAU,gGAAD,OACkCN,EADlC,SAAzD,eAAqCO,GAArC,qBAnBgB,8CAkEhB,WAAqBlB,GAArB,6FACEA,EAAEmB,iBADJ,kBAIgCC,MAC1B,kGALN,cAIUC,EAJV,gBAOwBA,EAAcC,OAPtC,cAOUC,EAPV,iBAQgCH,MAC1B,iHACA,CACEI,OAAQ,OACR/B,QAASA,EACTgC,KAAMC,KAAKC,WAAL,kBACD9B,GADC,IAEJ+B,cAAa,OAAEL,QAAF,IAAEA,OAAF,EAAEA,EAAOK,mBAfhC,eAQUC,EARV,iBAmB6BA,EAAcP,OAnB3C,eAmBUQ,EAnBV,iBAoBkCV,MAC5B,mGACA,CACEI,OAAQ,OACR/B,QAASA,EACTgC,KAAMC,KAAKC,UAAU,CACnBC,cAAa,OAAEE,QAAF,IAAEA,OAAF,EAAEA,EAAYF,kBA1BrC,eAoBUG,EApBV,iBA8B6BA,EAAgBT,OA9B7C,QA8BUU,EA9BV,OAgCInB,aAAaoB,QAAQ,aAArB,OAAmCD,QAAnC,IAAmCA,OAAnC,EAAmCA,EAAYE,YAC/CnB,EAAS,SACTN,GAAY,GAlChB,kDAqCMJ,QAAQC,IAAR,MArCN,2DAlEgB,sBA4GhB,OAzEA6B,EAAAA,EAAAA,YAAU,WACJxB,GACFO,MAGD,CAACP,KAqEF,gBAAKyB,UAAU,UAAf,UACE,iBAAKA,UAAU,QAAf,WACE,gBAAKA,UAAU,UAGf,gBAAKA,UAAU,OAAf,UACE,kBAAMC,OAAO,GAAb,WACE,qCACA,kBACEC,KAAK,QACLnC,KAAK,WACLoC,YAAY,wBACZC,SAAUzC,KAEZ,kBACEuC,KAAK,WACLnC,KAAK,WACLoC,YAAY,WACZC,SAAUzC,KAEZ,mBACE0C,QAAS,SAACzC,IAlIN,oCAmIF0C,CAAM1C,IAFV,sBAOA,8CACkB,KAChB,cAAG2C,KAAK,oCAAR,6BAEF,sGAGE","sources":["pages/SignUp/index.jsx"],"sourcesContent":["import { useEffect, useState, useContext } from \"react\";\r\nimport { AuthContext } from \"../../Providers/AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport useFetch1 from \"../../hooks/useFetch\";\r\n\r\nimport \"./index.scss\";\r\n\r\nconst headers = {\r\n  \"Content-Type\": \"application/json\",\r\n};\r\n\r\nfunction SignUp() {\r\n  const [values, setValues] = useState({\r\n    username: \"Arsen7\",\r\n    password: \"1234567\",\r\n  });\r\n\r\n  const onChangeHandler = (e) => {\r\n    setValues((prev) => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n    console.log(values);\r\n  };\r\n\r\n  const { userObj, setLoggedIn, setUserObj } = useContext(AuthContext);\r\n\r\n  const id = localStorage.getItem(\"session-id\");\r\n  const navigate = useNavigate();\r\n\r\n  const [user, userError, userLoading, dofetch] = useFetch1(`\r\n  https://api.themoviedb.org/3/account?api_key=210df5155329bef70be1615bd2091852&session_id=${id}\r\n  `);\r\n\r\n  // const [token, , , tokenFetch] = useFetch1(\r\n  //   \"https://api.themoviedb.org/3/authentication/token/new?api_key=210df5155329bef70be1615bd2091852\"\r\n  // );\r\n\r\n  // const [login, , , loginFetch] = useFetch1(\r\n  //   \"https://api.themoviedb.org/3/authentication/token/validate_with_login?api_key=210df5155329bef70be1615bd2091852\"\r\n  // );\r\n\r\n  // const [session, , sessionFetch] = useFetch1(\r\n  //   \"https://api.themoviedb.org/3/authentication/session/new?api_key=210df5155329bef70be1615bd2091852\"\r\n  // );\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      dofetch();\r\n      // setUserObj(user)\r\n    }\r\n  }, [id]);\r\n\r\n    // useEffect(() => {\r\n    //   if (user) {\r\n    //     setLoggedIn(true);\r\n    //     setUserObj(user);\r\n    //   }\r\n    // }, [user]);\r\n\r\n  // function signIn(e) {\r\n  //   e.preventDefault();\r\n\r\n  //   tokenFetch();\r\n  //   console.log(45);\r\n  // }\r\n\r\n  // useEffect(() => {\r\n  //   loginFetch(\"POST\", body, headers);\r\n  // }, [token]);\r\n\r\n  // useEffect(() => {\r\n  //   if (userObj) {\r\n  //     navigate(\"/home\");\r\n  //   }\r\n  // }, [userObj]);\r\n\r\n  async function signI(e) {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const tokenResponse = await fetch(\r\n        \"https://api.themoviedb.org/3/authentication/token/new?api_key=210df5155329bef70be1615bd2091852\"\r\n      );\r\n      const token = await tokenResponse.json();\r\n      const loginResponse = await fetch(\r\n        \"https://api.themoviedb.org/3/authentication/token/validate_with_login?api_key=210df5155329bef70be1615bd2091852\",\r\n        {\r\n          method: \"POST\",\r\n          headers: headers,\r\n          body: JSON.stringify({\r\n            ...values,\r\n            request_token: token?.request_token,\r\n          }),\r\n        }\r\n      );\r\n      const loginToken = await loginResponse.json();\r\n      const sessionResponse = await fetch(\r\n        \"https://api.themoviedb.org/3/authentication/session/new?api_key=210df5155329bef70be1615bd2091852\",\r\n        {\r\n          method: \"POST\",\r\n          headers: headers,\r\n          body: JSON.stringify({\r\n            request_token: loginToken?.request_token,\r\n          }),\r\n        }\r\n      );\r\n      const sessionRes = await sessionResponse.json();\r\n\r\n      localStorage.setItem(\"session-id\", sessionRes?.session_id);\r\n      navigate(\"/home\");\r\n      setLoggedIn(true)\r\n    } catch(e) {\r\n      // (err) => {\r\n        console.log(e);\r\n      // };\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"section\">\r\n      <div className=\"cover\">\r\n        <div className=\"logo\">\r\n          {/* <img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Netflix_2015_logo.svg/1198px-Netflix_2015_logo.svg.png?20190206123158\" /> */}\r\n        </div>\r\n        <div className=\"form\">\r\n          <form action=\"\">\r\n            <h1>Sign In</h1>\r\n            <input\r\n              type=\"emial\"\r\n              name=\"username\"\r\n              placeholder=\"Email or phone number\"\r\n              onChange={onChangeHandler}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Password\"\r\n              onChange={onChangeHandler}\r\n            />\r\n            <button\r\n              onClick={(e) => {\r\n                signI(e);\r\n              }}\r\n            >\r\n              Sign In\r\n            </button>\r\n            <span>\r\n              New to Netflix?{\" \"}\r\n              <a href=\"https://www.themoviedb.org/signup\">Sign up now</a>\r\n            </span>\r\n            <small>\r\n              This page is protected by Google reCAPCHA to ensure you're not a\r\n              bot.\r\n              <b> Learn more</b>\r\n            </small>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignUp;\r\n"],"names":["headers","useState","username","password","values","setValues","onChangeHandler","e","prev","target","name","value","console","log","useContext","AuthContext","setLoggedIn","userObj","id","setUserObj","localStorage","getItem","navigate","useNavigate","useFetch1","dofetch","preventDefault","fetch","tokenResponse","json","token","method","body","JSON","stringify","request_token","loginResponse","loginToken","sessionResponse","sessionRes","setItem","session_id","useEffect","className","action","type","placeholder","onChange","onClick","signI","href"],"sourceRoot":""}